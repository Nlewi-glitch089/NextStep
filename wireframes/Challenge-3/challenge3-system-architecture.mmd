%% Challenge 3: Shopping Cart System Architecture
graph TD
    A[User Actions] --> B[ShoppingCart Class]
    B --> C[Event System]
    B --> D[Cart Operations]
    B --> E[Calculations]
    
    C --> C1[addEventListener]
    C --> C2[removeEventListener]
    C --> C3[triggerEvent]
    
    D --> D1[addItem]
    D --> D2[removeItem]
    D --> D3[updateQuantity]
    D --> D4[clearCart]
    D --> D5[checkout]
    
    E --> E1[calculateItemSubtotal]
    E --> E2[calculateItemDiscount]
    E --> E3[calculateItemTotal]
    E --> E4[calculateSubtotal]
    E --> E5[calculateTotalDiscounts]
    E --> E6[calculateTotal]
    
    F[ProductCatalog] --> G[Product Management]
    G --> G1[getAllProducts]
    G --> G2[findProductById]
    G --> G3[getProductsByCategory]
    G --> G4[getProductsByTag]
    G --> G5[getInStockProducts]
    
    H[Higher-Order Functions] --> H1[createDiscountCalculator]
    H --> H2[createPriceFormatter]
    H --> H3[createCartValidator]
    
    D1 --> I[Item Added Event]
    D2 --> J[Item Removed Event]
    D3 --> K[Quantity Changed Event]
    D4 --> L[Cart Cleared Event]
    D5 --> M[Checkout Event]
    
    I --> N[Event Listeners]
    J --> N
    K --> N
    L --> N
    M --> N
    
    N --> O[React Components]
    O --> P[UI Updates]