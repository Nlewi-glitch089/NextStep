%% Challenge 3: Shopping Cart State Machine
stateDiagram-v2
    [*] --> CartEmpty
    
    CartEmpty --> ItemAdded : addItem()
    ItemAdded --> CartWithItems : event triggered
    
    CartWithItems --> ItemAdded : addItem()
    CartWithItems --> QuantityChanged : updateQuantity()
    CartWithItems --> ItemRemoved : removeItem()
    CartWithItems --> CartCleared : clearCart()
    CartWithItems --> CheckoutInitiated : checkout()
    
    QuantityChanged --> CartWithItems : event triggered
    ItemRemoved --> CartWithItems : event triggered
    ItemRemoved --> CartEmpty : last item removed
    
    CartCleared --> CartEmpty : event triggered
    CheckoutInitiated --> ProcessingPayment : payment processing
    ProcessingPayment --> CartEmpty : checkout completed
    ProcessingPayment --> CartWithItems : payment failed
    
    CartWithItems --> CartWithItems : calculate totals
    CartEmpty --> CartEmpty : calculate totals (zero)